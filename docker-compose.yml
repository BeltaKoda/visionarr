# Visionarr Development Docker Compose
# Use for local testing before deploying to Unraid

services:
  visionarr:
    build: .
    container_name: visionarr
    environment:
      # Scheduled scans
      - DELTA_SCAN_INTERVAL_MINUTES=${DELTA_SCAN_INTERVAL_MINUTES:-30}
      - FULL_SCAN_DAY=${FULL_SCAN_DAY:-sunday}
      - FULL_SCAN_TIME=${FULL_SCAN_TIME:-03:00}
      
      # Processing
      - PROCESS_CONCURRENCY=${PROCESS_CONCURRENCY:-1}
      - MIN_FREE_SPACE_GB=${MIN_FREE_SPACE_GB:-50}
      
      # Backup
      - BACKUP_ENABLED=${BACKUP_ENABLED:-true}
      - BACKUP_RETENTION_DAYS=${BACKUP_RETENTION_DAYS:-7}
      
      # Logging
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      
      # Notifications (optional)
      - WEBHOOK_URL=${WEBHOOK_URL:-}
    
    volumes:
      # CRITICAL: These MUST be real paths, not container-internal
      # On Unraid, use /mnt/user/... paths
      - ./data/config:/config
      - ./data/temp:/temp
      - /path/to/movies:/movies
      - /path/to/tv:/tv
    
    # For manual mode, use interactive terminal
    # docker compose run --rm visionarr --manual
    stdin_open: true
    tty: true
    
    restart: unless-stopped
