<?xml version="1.0"?>
<Container version="2">
  <Name>visionarr</Name>
  <Repository>ghcr.io/beltakoda/visionarr:latest</Repository>
  <Registry>https://ghcr.io</Registry>
  <Network>bridge</Network>
  <Privileged>false</Privileged>
  <Support>https://github.com/BeltaKoda/visionarr/issues</Support>
  <Project>https://github.com/BeltaKoda/visionarr</Project>
  <Overview>
    Visionarr automatically scans your media library and converts Dolby Vision 
    Profile 7 content to Profile 8 for better device compatibility 
    (Nvidia Shield, Apple TV, Infuse, etc.).
    
    Profile 7 (Blu-ray dual-layer) can trigger transcoding in Plex/Jellyfin.
    Profile 8 (streaming single-layer) works everywhere.
    
    No transcoding - just metadata conversion. No quality loss!
    
    FIRST RUN: Auto-processing is disabled until you complete initial setup.
    Run: docker exec -it visionarr menu
  </Overview>
  <Category>MediaApp:Video</Category>
  <Icon>https://raw.githubusercontent.com/BeltaKoda/visionarr/main/assets/icon.png</Icon>
  <TemplateURL>https://raw.githubusercontent.com/BeltaKoda/visionarr/main/unraid/visionarr.xml</TemplateURL>
  <Maintainer>BeltaKoda</Maintainer>
  <Shell>bash</Shell>
  <ExtraParams>--init</ExtraParams>
  
  <!-- Environment Variables -->
  <Config Name="Delta Scan Interval (min)" Target="DELTA_SCAN_INTERVAL_MINUTES" Default="30" Mode="" Description="How often to scan for new files (minutes)" Type="Variable" Display="always" Required="false" Mask="false"/>
  <Config Name="Full Scan Day" Target="FULL_SCAN_DAY" Default="sunday" Mode="" Description="Day of week for full library scan" Type="Variable" Display="always" Required="false" Mask="false"/>
  <Config Name="Full Scan Time" Target="FULL_SCAN_TIME" Default="03:00" Mode="" Description="Time for full scan (24h format, e.g., 03:00)" Type="Variable" Display="always" Required="false" Mask="false"/>
  
  <Config Name="PUID" Target="PUID" Default="99" Mode="" Description="User ID for file permissions (99 = nobody on Unraid)" Type="Variable" Display="always" Required="false" Mask="false"/>
  <Config Name="PGID" Target="PGID" Default="100" Mode="" Description="Group ID for file permissions (100 = users on Unraid)" Type="Variable" Display="always" Required="false" Mask="false"/>
  
  <Config Name="Process Concurrency" Target="PROCESS_CONCURRENCY" Default="1" Mode="" Description="Max simultaneous conversions (recommend: 1)" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Min Free Space (GB)" Target="MIN_FREE_SPACE_GB" Default="50" Mode="" Description="Minimum disk space required before processing" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  
  <Config Name="Backup Enabled" Target="BACKUP_ENABLED" Default="true" Mode="" Description="Keep .original backup files after conversion" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Backup Retention (days)" Target="BACKUP_RETENTION_DAYS" Default="7" Mode="" Description="Auto-delete backups after X days (0 = never)" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  
  <Config Name="Log Level" Target="LOG_LEVEL" Default="INFO" Mode="" Description="Logging verbosity: DEBUG, INFO, WARNING, ERROR" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  <Config Name="Webhook URL" Target="WEBHOOK_URL" Default="" Mode="" Description="Discord/Slack webhook for notifications (optional)" Type="Variable" Display="advanced" Required="false" Mask="false"/>
  
  <!-- Volume Mappings -->
  <Config Name="Config" Target="/config" Default="/mnt/user/appdata/visionarr" Mode="rw" Description="Persistent config and database storage" Type="Path" Display="always" Required="true" Mask="false"/>
  <Config Name="Temp" Target="/temp" Default="/mnt/user/appdata/visionarr/temp" Mode="rw" Description="CRITICAL: Temp files during conversion. Use cache drive if available!" Type="Path" Display="always" Required="true" Mask="false"/>
  <Config Name="Movies" Target="/movies" Default="/mnt/user/movies" Mode="rw" Description="Movies folder path" Type="Path" Display="always" Required="true" Mask="false"/>
  <Config Name="TV Shows" Target="/tv" Default="/mnt/user/tv" Mode="rw" Description="TV Shows folder path" Type="Path" Display="always" Required="false" Mask="false"/>
</Container>
